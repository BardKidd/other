(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["OrderSearch"],{"06c5":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("fb6a"),a("d3b7"),a("b0c0"),a("a630"),a("3ca3");var r=a("6b75");function i(e,t){if(e){if("string"===typeof e)return Object(r["a"])(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(r["a"])(e,t):void 0}}},"0f1e":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{attrs:{"page-sizes":[5,10,20,50],"page-size":e.pageSize,background:"","current-page":e.currentPage,layout:"prev, pager, next, sizes",total:e.total},on:{"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})},i=[],o=(a("a9e3"),{name:"Pagination",props:{total:{type:Number,required:!0}},data:function(){return{currentPage:1,pageSize:20}},methods:{},watch:{currentPage:function(e){var t=this;t.$emit("page",e)},pageSize:function(e){var t=this;t.$emit("size",e)}}}),s=o,n=a("2877"),c=Object(n["a"])(s,r,i,!1,null,null,null);t["a"]=c.exports},"2b61":function(e){e.exports=JSON.parse('{"Status":200,"ErrorMessage":null,"Data":[{"NF001":"2","NF002":"014-00","NF003":"貨到14天+1電匯","NF004":"1"},{"NF001":"2","NF002":"014-01","NF003":"貨到14天+1-業務親收","NF004":"1"},{"NF001":"2","NF002":"014-02","NF003":"貨到14天+1-寄回支票","NF004":"1"},{"NF001":"2","NF002":"015-00","NF003":"統一客樂得代收","NF004":"1"},{"NF001":"2","NF002":"030-01","NF003":"月結,附回郵乙紙","NF004":"1"},{"NF001":"2","NF002":"030-05","NF003":"月結30天,每月5日電匯","NF004":"2"},{"NF001":"2","NF002":"030-10","NF003":"月結30天,每月10日電匯","NF004":"2"},{"NF001":"2","NF002":"030-25","NF003":"月結30天,每月25日電匯","NF004":"2"},{"NF001":"2","NF002":"030-30","NF003":"月結30天,30日內由業務親收貨款","NF004":"2"},{"NF001":"2","NF002":"045-00","NF003":"月結45天,","NF004":"2"}]}')},"43e6":function(e){e.exports=JSON.parse('{"Status":200,"ErrorMessage":null,"Data":{"OrderId":2040,"OrderStoreDetails":[{"ProductDtos":[{"OrderStoreProductId":2063,"SerialNumber":1,"OrderStoreId":2053,"ItemNo":"11020112Z           ","ItemName":"褐抑定藻寡醣加強配方-500粒(員購)","Specification":"550mg/粒 500粒/罐","OrderQTY":1,"DepositQTY":0,"FreeQty":0,"Free":false,"WhseID":"KS01001   ","UnitPrice":0,"Subtotal":0,"UOM":"罐","PartialDelivery":false,"PartialDeliveryQTY":1,"IsPending":true,"PendingTo":null,"CreateTime":"2022-02-24T15:50:42.793","CreateUser":"db2a1b45-534d-4803-adae-c3c4f155ecb5","UpdateTime":"2022-02-24T15:50:53.483","UpdateUser":"db2a1b45-534d-4803-adae-c3c4f155ecb5"}],"OrderStoreId":2053,"OrderId":2040,"CustomerId":"11B0074002","CustomerName":"廣益藥師","ProductCount":1,"TotalQty":1,"DeliveryDate":"2022-02-28T00:00:00","DeliveryTimeCode":"3","ReceiveName":"hj7h87h87h","ReceiveContact":"02-2254-7482","ReceiveAddress":"新北市板橋區自由路21號/廣益藥師藥局","Payment":null,"WithTaxID":null,"TaxID":null,"InvoiceTitle":"廣益藥師藥局","InvoiceAttached":null,"InvoiceName":null,"InvoiceContact":null,"InvoiceAddress":null,"Charge":30,"Fare":0,"BranchRemark":"","CreateTime":"2022-02-24T15:50:42.74","CreateUser":"db2a1b45-534d-4803-adae-c3c4f155ecb5","UpdateTime":"2022-02-24T15:50:53.45","UpdateUser":"db2a1b45-534d-4803-adae-c3c4f155ecb5"}]}}')},6946:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("ac1f"),a("5319"),a("d3b7"),a("25f0"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("99af");var r={data:function(){return{today:""}},methods:{Guid:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))},AddZero:function(e){return e<10?"0".concat(e):e},Today:function(){var e=this,t=new Date,a=t.getFullYear(),r=e.AddZero(t.getMonth()+1),i=e.AddZero(t.getDate()),o="".concat(a,"-").concat(r,"-").concat(i);e.today=o}},mounted:function(){var e=this;e.Today()}}},"6b75":function(e,t,a){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a.d(t,"a",(function(){return r}))},"75b9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",[a("div",{staticClass:"filter-block"},[a("div",{staticClass:"filter-field"},[a("span",{staticClass:"title d-block"},[e._v(" 起始日 ")]),a("DatePicker",{staticClass:"commonSearchDate",attrs:{"value-type":"format",format:"YYYY-MM-DD",placeholder:"請選擇起始日期"},model:{value:e.searchBox.from,callback:function(t){e.$set(e.searchBox,"from",t)},expression:"searchBox.from"}})],1),a("div",{staticClass:"filter-field"},[a("span",{staticClass:"title d-block"},[e._v(" 結束日 ")]),a("DatePicker",{staticClass:"commonSearchDate",attrs:{placeholder:"請選擇結束日期","value-type":"format",format:"YYYY-MM-DD"},model:{value:e.searchBox.to,callback:function(t){e.$set(e.searchBox,"to",t)},expression:"searchBox.to"}})],1),a("div",{staticClass:"filter-field"},[a("span",{staticClass:"title"},[e._v(" 客戶名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchBox.keyword,expression:"searchBox.keyword"}],staticClass:"pl-2",attrs:{type:"text",placeholder:"請輸入客戶代碼或名稱"},domProps:{value:e.searchBox.keyword},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getAllData.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.searchBox,"keyword",t.target.value)}}})]),a("div",{staticClass:"filter-field"},[a("span",{staticClass:"title"},[e._v(" 訂單狀態 ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.searchBox.status,expression:"searchBox.status"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.searchBox,"status",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v("全部")]),a("option",{attrs:{value:"Cancel"}},[e._v("作廢")]),a("option",{attrs:{value:"Reject"}},[e._v("否決")]),a("option",{attrs:{value:"Signin"}},[e._v("簽核中")])])]),a("div",{staticClass:"filter-btn-wrap"},[a("button",{staticClass:"btn btn_primary",attrs:{type:"button"},on:{click:e.getAllData}},[e._v(" 查詢 ")])])]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rows.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize)}},[a("el-table-column",{attrs:{sortable:!0,align:"center",prop:"Seq",label:"項次"}}),a("el-table-column",{attrs:{sortable:!0,align:"center",prop:"OrderNumber",label:"訂單編號"}}),a("el-table-column",{attrs:{sortable:!0,align:"center",prop:"OrderDate",label:"訂單日期"}}),a("el-table-column",{attrs:{sortable:!0,align:"center",prop:"HQName",label:"客戶名稱"}}),a("el-table-column",{attrs:{sortable:!0,align:"center",prop:"OrderStatus",label:"訂單狀態"}}),a("el-table-column",{attrs:{label:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("button",{staticClass:"btn btn_primary",attrs:{type:"button"},on:{click:function(a){return e.openModal(t.row,"copyOrder")}}},[e._v(" 複製訂單 ")])]}}])}),a("el-table-column",{attrs:{label:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("button",{staticClass:"btn btn_primary",attrs:{type:"button"},on:{click:function(a){return e.openModal(t.row,"viewDetail")}}},[e._v(" 觀看明細 ")])]}}])})],1),e.rows.length>0?a("Pagination",{attrs:{total:e.rows.length},on:{size:function(t){return e.pageSize=t},page:function(t){return e.currentPage=t}}}):e._e(),e._m(0),a("ReadOnlyModal",{attrs:{IsViewDetail:e.IsViewDetail,DeliveryTime:e.allDeliveryTime,branchStore:e.branchStore}})],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-note"},[a("span",{staticClass:"note"},[e._v("!")]),e._v(" 如需作廢訂單，請至業務訂購單作廢 ")])}],o=(a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("06c5"));function s(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Object(o["a"])(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,n=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){c=!0,s=e},f:function(){try{n||null==a["return"]||a["return"]()}finally{if(c)throw s}}}}var n=a("5530"),c=a("1da1"),d=(a("96cf"),a("159b"),a("ac1f"),a("466d"),a("99af"),a("1276"),a("a9e3"),a("d81d"),a("498a"),a("6946")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal fade bd-example-modal-lg",attrs:{id:"readonlycheck",tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-scrollable modal-lg modal-dialog-centered"},[a("section",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body p-0 overflow-hidden"},[a("div",{staticClass:"order-detail row"},[a("div",{staticClass:"info col-sm-12 col-md-3 col-lg-3"},[a("h3",[e._v(e._s(e.customerData.HQName))]),a("div",[e._v(e._s(e.customerData.HQCode))]),a("table",[a("tr",[e._m(0),a("td",[e._v(e._s(e.customerData.TaxID))])]),a("tr",[e._m(1),a("td",[e._v(e._s(e.customerData.InvoiceName))])]),a("tr",[e._m(2),a("td",[e._v(e._s(e.customerData.InvoiceContact))])])])]),a("div",{staticClass:"list col-md-9 col-lg-9 col-sm-12"},[a("div",{staticClass:"p-3"},[a("section",{staticClass:"invoice-block line"},[e.detailData.isHeadquarters?a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("發票資訊")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.detailData.IsHeadquarterInvoice,expression:"detailData.IsHeadquarterInvoice"}],attrs:{type:"radio",name:"in-info",disabled:""},domProps:{value:!0,checked:e._q(e.detailData.IsHeadquarterInvoice,!0)},on:{change:function(t){return e.$set(e.detailData,"IsHeadquarterInvoice",!0)}}}),a("span",[e._v("1.總店號發票合併")])]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.detailData.IsHeadquarterInvoice,expression:"detailData.IsHeadquarterInvoice"}],attrs:{disabled:"",type:"radio",name:"in-info"},domProps:{value:!1,checked:e._q(e.detailData.IsHeadquarterInvoice,!1)},on:{change:function(t){return e.$set(e.detailData,"IsHeadquarterInvoice",!1)}}}),a("span",[e._v("2.分店分別寄送")])])])])]):e._e(),a("div",{staticClass:"invoice-detail"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("客戶代碼(總店號)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.detailData.HQCode,expression:"detailData.HQCode"}],attrs:{type:"text",disabled:"",placeholder:"客戶代碼(總店號)"},domProps:{value:e.detailData.HQCode},on:{input:function(t){t.target.composing||e.$set(e.detailData,"HQCode",t.target.value)}}})])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("客戶名稱(總店號)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.detailData.HQName,expression:"detailData.HQName"}],attrs:{type:"text",disabled:"",placeholder:"客戶名稱(總店號)"},domProps:{value:e.detailData.HQName},on:{input:function(t){t.target.composing||e.$set(e.detailData,"HQName",t.target.value)}}})])]),e.detailData.IsHeadquarterInvoice?[a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("付款方式")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.detailData.Payment,expression:"detailData.Payment"}],attrs:{disabled:"",placeholder:"付款方式"},domProps:{value:e.detailData.Payment},on:{input:function(t){t.target.composing||e.$set(e.detailData,"Payment",t.target.value)}}})])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("不開統編")]),a("div",{staticClass:"switchBox"},[a("div",{staticClass:"switchBox_content"},[a("label",{staticClass:"switchBox_content_box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.detailData.WithTaxID,expression:"detailData.WithTaxID"}],staticClass:"switchBox_content_box_input",attrs:{type:"radio",disabled:"",name:"WithTaxID"},domProps:{value:!0,checked:e._q(e.detailData.WithTaxID,!0)},on:{change:function(t){return e.$set(e.detailData,"WithTaxID",!0)}}}),a("span",{staticClass:"switchBox_content_box_text"},[e._v("是")])]),a("label",{staticClass:"switchBox_content_box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.detailData.WithTaxID,expression:"detailData.WithTaxID"}],staticClass:"switchBox_content_box_input",attrs:{type:"radio",disabled:"",name:"WithTaxID"},domProps:{value:!1,checked:e._q(e.detailData.WithTaxID,!1)},on:{change:function(t){return e.$set(e.detailData,"WithTaxID",!1)}}}),a("span",{staticClass:"switchBox_content_box_text"},[e._v("否")])])])])])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("統一編號")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.detailData.TaxID,expression:"detailData.TaxID",modifiers:{trim:!0}}],attrs:{disabled:"",type:"text",placeholder:"統一編號"},domProps:{value:e.detailData.TaxID},on:{input:function(t){t.target.composing||e.$set(e.detailData,"TaxID",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("隨貨附發票")]),a("div",{staticClass:"switchBox"},[a("div",{staticClass:"switchBox_content"},[a("label",{staticClass:"switchBox_content_box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.detailData.InvoiceName,expression:"detailData.InvoiceName"}],staticClass:"switchBox_content_box_input",attrs:{type:"radio",disabled:"",name:"InvoiceName"},domProps:{value:!0,checked:e._q(e.detailData.InvoiceName,!0)},on:{change:function(t){return e.$set(e.detailData,"InvoiceName",!0)}}}),a("span",{staticClass:"switchBox_content_box_text"},[e._v("是")])]),a("label",{staticClass:"switchBox_content_box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.detailData.InvoiceName,expression:"detailData.InvoiceName"}],staticClass:"switchBox_content_box_input",attrs:{type:"radio",disabled:"",name:"InvoiceName"},domProps:{value:!1,checked:e._q(e.detailData.InvoiceName,!1)},on:{change:function(t){return e.$set(e.detailData,"InvoiceName",!1)}}}),a("span",{staticClass:"switchBox_content_box_text"},[e._v("否")])])])])])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("發票收件人名稱")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.detailData.InvoiceName,expression:"detailData.InvoiceName",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"發票收件人名稱",disabled:""},domProps:{value:e.detailData.InvoiceName},on:{input:function(t){t.target.composing||e.$set(e.detailData,"InvoiceName",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("發票收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.detailData.InvoiceContact,expression:"detailData.InvoiceContact",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"發票收件人電話",disabled:""},domProps:{value:e.detailData.InvoiceContact},on:{input:function(t){t.target.composing||e.$set(e.detailData,"InvoiceContact",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),a("div",{staticClass:"col-sm-12 col-md-12"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("發票地址")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.detailData.InvoiceAddress,expression:"detailData.InvoiceAddress",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"發票地址",disabled:""},domProps:{value:e.detailData.InvoiceAddress},on:{input:function(t){t.target.composing||e.$set(e.detailData,"InvoiceAddress",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])]:e._e(),a("div",{staticClass:"col-sm-12 col-md-12"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("備註")]),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.detailData.Remark,expression:"detailData.Remark",modifiers:{trim:!0}}],staticClass:"pl-2",attrs:{maxlength:"400",readonly:"",placeholder:"備註"},domProps:{value:e.detailData.Remark},on:{input:function(t){t.target.composing||e.$set(e.detailData,"Remark",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])],2)])]),e._l(e.store,(function(t){return a("section",{key:t.OrderId,staticClass:"line"},[a("div",{staticClass:"table-title"},[a("span",[e._v(e._s(t.store.CustomerShtName)+e._s(t.store.CustomerID)+"-訂購品項 ")])]),a("div",{staticClass:"table-wrap"},[a("table",{staticClass:"common-datatable datatable stripe order-column w-100"},[e._m(3,!0),a("tbody",e._l(t.productData,(function(t){return a("tr",{key:""+t.OrderStoreProductId+t.PendingTo},[a("td",[e._v(e._s(t.ItemNo))]),a("td",[a("span",[!t.PendingTo&&t.IsPending?a("span",{staticClass:"pendingOrder d-block mb-1"},[e._v("掛單 ")]):e._e(),t.DepositQTY>0?a("span",{staticClass:"pendingOrder d-block"},[e._v("寄倉 ")]):e._e()])]),a("td",[e._v(" "+e._s(t.ItemName)+" ")]),a("td",{staticClass:"text-center"},[e._v(" "+e._s(t.OrderQTY)+" ")]),a("td",{staticClass:"text-center"},[e._v(" "+e._s(t.DepositQTY)+" ")]),t.Free?a("td",[e._v("公關品項")]):a("td",[e._v("訂購")]),a("td",{staticClass:"text-center"},[e._v(e._s(t.UnitPrice))]),a("td",{staticClass:"text-center"},[e._v(" "+e._s(t.UnitPrice*t.OrderQTY)+" ")])])})),0)])]),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("送貨日期")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.branchData.DeliveryDate,expression:"branch.branchData.DeliveryDate",modifiers:{trim:!0}}],attrs:{disabled:"",type:"text",placeholder:"送貨日期"},domProps:{value:t.branchData.DeliveryDate},on:{input:function(a){a.target.composing||e.$set(t.branchData,"DeliveryDate",a.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("送貨時段")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.DeliveryTimeCode,expression:"branch.branchData.DeliveryTimeCode"}],attrs:{disabled:"",type:"text",placeholder:"送貨時段"},domProps:{value:t.branchData.DeliveryTimeCode},on:{input:function(a){a.target.composing||e.$set(t.branchData,"DeliveryTimeCode",a.target.value)}}})])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("收貨人名稱")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.branchData.ReceiveName,expression:"branch.branchData.ReceiveName",modifiers:{trim:!0}}],attrs:{disabled:"",type:"text",placeholder:"收貨人名稱"},domProps:{value:t.branchData.ReceiveName},on:{input:function(a){a.target.composing||e.$set(t.branchData,"ReceiveName",a.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("收貨人連絡電話")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.branchData.ReceiveContact,expression:"branch.branchData.ReceiveContact",modifiers:{trim:!0}}],attrs:{disabled:"",type:"text",placeholder:"收貨人連絡電話"},domProps:{value:t.branchData.ReceiveContact},on:{input:function(a){a.target.composing||e.$set(t.branchData,"ReceiveContact",a.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),e.detailData.IsHeadquarterInvoice?e._e():[a("div",{staticClass:"col-sm -12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("付款方式")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.Payment,expression:"branch.branchData.Payment"}],attrs:{disabled:"",placeholder:"付款方式",type:"text"},domProps:{value:t.branchData.Payment},on:{input:function(a){a.target.composing||e.$set(t.branchData,"Payment",a.target.value)}}})])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("不開統編")]),a("div",{staticClass:"switchBox"},[a("div",{staticClass:"switchBox_content"},[a("label",{staticClass:"switchBox_content_box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.WithTaxID,expression:"branch.branchData.WithTaxID"}],staticClass:"switchBox_content_box_input",attrs:{type:"radio",id:"NotTaxId_Y",disabled:""},domProps:{value:!0,checked:e._q(t.branchData.WithTaxID,!0)},on:{change:function(a){return e.$set(t.branchData,"WithTaxID",!0)}}}),a("span",{staticClass:"switchBox_content_box_text"},[e._v("是")])]),a("label",{staticClass:"switchBox_content_box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.WithTaxID,expression:"branch.branchData.WithTaxID"}],staticClass:"switchBox_content_box_input",attrs:{type:"radio",id:"NotTaxId_N",disabled:""},domProps:{value:!1,checked:e._q(t.branchData.WithTaxID,!1)},on:{change:function(a){return e.$set(t.branchData,"WithTaxID",!1)}}}),a("span",{staticClass:"switchBox_content_box_text"},[e._v("否")])])])])])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("統一編號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.TaxID,expression:"branch.branchData.TaxID"}],attrs:{disabled:"",type:"text",placeholder:"統一編號"},domProps:{value:t.branchData.TaxID},on:{input:function(a){a.target.composing||e.$set(t.branchData,"TaxID",a.target.value)}}})])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("隨貨附發票")]),a("div",{staticClass:"switchBox"},[a("div",{staticClass:"switchBox_content"},[a("label",{staticClass:"switchBox_content_box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.InvoiceAttached,expression:"branch.branchData.InvoiceAttached"}],staticClass:"switchBox_content_box_input",attrs:{type:"radio",disabled:""},domProps:{value:!0,checked:e._q(t.branchData.InvoiceAttached,!0)},on:{change:function(a){return e.$set(t.branchData,"InvoiceAttached",!0)}}}),a("span",{staticClass:"switchBox_content_box_text"},[e._v("是")])]),a("label",{staticClass:"switchBox_content_box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.InvoiceAttached,expression:"branch.branchData.InvoiceAttached"}],staticClass:"switchBox_content_box_input",attrs:{type:"radio",disabled:""},domProps:{value:!1,checked:e._q(t.branchData.InvoiceAttached,!1)},on:{change:function(a){return e.$set(t.branchData,"InvoiceAttached",!1)}}}),a("span",{staticClass:"switchBox_content_box_text"},[e._v("否")])])])])])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("發票收件人名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.InvoiceName,expression:"branch.branchData.InvoiceName"}],attrs:{type:"text",placeholder:"發票收件人名稱",disabled:""},domProps:{value:t.branchData.InvoiceName},on:{input:function(a){a.target.composing||e.$set(t.branchData,"InvoiceName",a.target.value)}}})])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("發票收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.InvoiceContact,expression:"branch.branchData.InvoiceContact"}],attrs:{type:"text",placeholder:"發票收件人電話",disabled:""},domProps:{value:t.branchData.InvoiceContact},on:{input:function(a){a.target.composing||e.$set(t.branchData,"InvoiceContact",a.target.value)}}})])]),a("div",{staticClass:"col-sm-12 col-md-12"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("發票地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.InvoiceAddress,expression:"branch.branchData.InvoiceAddress"}],attrs:{type:"text",placeholder:"發票地址",disabled:""},domProps:{value:t.branchData.InvoiceAddress},on:{input:function(a){a.target.composing||e.$set(t.branchData,"InvoiceAddress",a.target.value)}}})])])],a("div",{staticClass:"col-sm-12 col-md-4"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("手續費")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.Charge,expression:"branch.branchData.Charge"}],attrs:{type:"text",placeholder:"手續費",disabled:""},domProps:{value:t.branchData.Charge},on:{input:function(a){a.target.composing||e.$set(t.branchData,"Charge",a.target.value)}}})])]),a("div",{staticClass:"col-sm-12 col-md-4"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("運費")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.Fare,expression:"branch.branchData.Fare"}],attrs:{type:"text",placeholder:"運費",disabled:""},domProps:{value:t.branchData.Fare},on:{input:function(a){a.target.composing||e.$set(t.branchData,"Fare",a.target.value)}}})])]),a("div",{staticClass:"col-sm-12 col-md-4"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("分店總計")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.branchData.Subtotal,expression:"branch.branchData.Subtotal"}],attrs:{type:"text",placeholder:"分店總計",disabled:""},domProps:{value:t.branchData.Subtotal},on:{input:function(a){a.target.composing||e.$set(t.branchData,"Subtotal",a.target.value)}}})])]),a("div",{staticClass:"col-sm-12 col-md-12"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("收貨地址")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.branchData.ReceiveAddress,expression:"branch.branchData.ReceiveAddress",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"收貨地址",disabled:""},domProps:{value:t.branchData.ReceiveAddress},on:{input:function(a){a.target.composing||e.$set(t.branchData,"ReceiveAddress",a.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),a("div",{staticClass:"col-sm-12 col-md-12"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("備註")]),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.branchData.BranchRemark,expression:"branch.branchData.BranchRemark",modifiers:{trim:!0}}],staticClass:"pl-2",attrs:{placeholder:"備註",readonly:""},domProps:{value:t.branchData.BranchRemark},on:{input:function(a){a.target.composing||e.$set(t.branchData,"BranchRemark",a.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])],2)])})),a("div",{staticClass:"invoice-detail"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12"},[a("div",{staticClass:"field"},[a("div",{staticClass:"field-name"},[e._v("總金額")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.total,expression:"total"}],attrs:{type:"text",placeholder:"總金額",disabled:""},domProps:{value:e.total},on:{input:function(t){t.target.composing||(e.total=t.target.value)}}})])])])])],2),e._m(4)])])])])])])},u=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("i",{staticClass:"fas fa-barcode"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("i",{staticClass:"fas fa-phone-volume"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("i",{staticClass:"fas fa-headset"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("品號")]),a("th"),a("th",[e._v("品名/規格")]),a("th",[e._v("訂購數量")]),a("th",[e._v("寄倉數量")]),a("th",[e._v("性質")]),a("th",[e._v("售價(含稅)")]),a("th",[e._v("小計(含稅)")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn_cancel",attrs:{type:"reset","data-dismiss":"modal"}},[e._v(" 關閉 ")])])}],m=(a("7db0"),a("a9de")),v=a("2f62"),p=a("2b61"),h={name:"ReadOnlyCheckModal",mixins:[m["a"]],props:{DeliveryTime:{type:Array,required:!0},IsViewDetail:{type:Boolean,required:!0},branchStore:{type:Array,required:!0}},data:function(){return{startDate:"",allPayTerm:[],Payment:!1,detailData:{},store:[],total:0}},mounted:function(){var e=this;e.$store.commit("ISLOADING",!0),e.allPayTerm=p.Data,e.$store.commit("ISLOADING",!1)},watch:{customerData:function(e){var t=this;t.detailData=e},detailData:function(e){var t,a,r,i=this;e.InvoiceContact||(e.InvoiceContact=null===(t=i.rows[0])||void 0===t?void 0:t.TEL_NO);e.InvoiceName||(e.InvoiceName=null===(a=i.rows[0])||void 0===a?void 0:a.Contact);e.TaxID||(e.TaxID=null===(r=i.rows[0])||void 0===r?void 0:r.TaxID);e.Payment&&(i.detailData.Payment=i.allPayTerm.find((function(t){return t.NF002===e.Payment})),i.detailData.Payment=i.detailData.Payment.NF003)},branchStore:function(e){var t=this;t.IsViewDetail&&(t.store=e)},store:function(e){var t=this;e.forEach((function(e){e.productData.forEach((function(t){e.branchData.Subtotal=e.branchData.Charge+e.branchData.Fare+t.UnitPrice*t.OrderQTY})),t.total+=e.branchData.Subtotal,e.branchData.DeliveryDate=e.branchData.DeliveryDate.split("T")[0],e.branchData.DeliveryTimeCode=t.DeliveryTime.find((function(t){return t.Code===e.branchData.DeliveryTimeCode})).Name,e.branchData.Payment=t.allPayTerm.find((function(t){return t.NF002===e.branchData.Payment})).NF003}))}},computed:Object(n["a"])({customerData:function(){return this.$store.state.customerData}},Object(v["c"])({rows:"customerRows"})),destroyed:function(){$(".modal").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()}},D=h,f=a("2877"),b=Object(f["a"])(D,l,u,!1,null,null,null),I=b.exports,C=a("0f1e"),y=a("b6db"),g=a("43e6"),N=a("9167"),x=a("d072"),P={name:"OrderSearch",mixins:[d["a"]],data:function(){return{currentPage:1,pageSize:20,customer:{},rows:[],searchBox:{status:"",from:"",to:"",keyword:""},allDeliveryTime:[{Code:"1",Name:"1.早上(09~12點)"},{Code:"2",Name:"2.中午(12~17點)"},{Code:"3",Name:"3.下午(17~20點)"},{Code:"4",Name:"4.不分時段"}],branchStore:[],IsViewDetail:!0,tempSearchProduct:[],store:{},checkModalBranchData:[]}},methods:{getAllData:function(){var e=this;e.searchBox.from=e.searchBox.from?e.searchBox.from:"",e.searchBox.to=e.searchBox.to?e.searchBox.to:"",e.rows=y.Data,e.rows.forEach((function(e,t){switch(e.Seq=t+1,e.OrderDate.match("T")||(e.OrderDate="".concat(e.OrderDate.split("T")[0]," ").concat(e.OrderDate.split("T")[1])),e.OrderStatus){case"Adopt":e.OrderStatus="通過";break;case"Cancel":e.OrderStatus="作廢";break;case"Reject":e.OrderStatus="否決";break;case"Signin":e.OrderStatus="簽核中";break;case"Draft":e.OrderStatus="草稿";break}}))},openModal:function(e,t){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=a,i.customer=Object(n["a"])(Object(n["a"])({},e),{},{CustomerFullName:e.Customer.CustomerFullName,CustomerID:e.Customer.CustomerID,CustomerShtName:e.Customer.CustomerShtName,FAX_NO:e.Customer.FAX_NO,UTypeName:e.Customer.UTypeName,isHeadquarters:!!e.ChainOrder}),i.customer.IsHeadquarterInvoice||"viewDetail"!==t){r.next=6;break}return o={keyword:i.customer.HQCode,city:"",district:"",purchaseType:"",IsDeactivated:""},r.next=6,i.$store.dispatch("getCustomer",o);case 6:if(i.$store.commit("CUSTOMERDATA",i.customer),"viewDetail"!==t){r.next=12;break}return r.next=10,i.viewDetailData(e.OrderId,"viewDetail");case 10:r.next=13;break;case 12:"copyOrder"===t&&i.viewDetailData(e.OrderId,"copyOrder");case 13:case"end":return r.stop()}}),r)})))()},viewDetailData:function(e,t){var a=this;a.branchStore=2039===e?N.Data.OrderStoreDetails:g.Data.OrderStoreDetails,a.checkModalBranchData=[],a.sortProduct(),a.branchStore.forEach((function(e){var t=0,r={Memo:e.BranchRemark,ReceiveAddress:e.ReceiveAddress,ReceiveContact:e.ReceiveContact,ReceiveName:e.ReceiveName,DeliveryDate:e.DeliveryDate.split("T")[0],DeliveryTime:e.DeliveryTimeCode,CustomerId:e.CustomerId,InvoiceAddress:e.InvoiceAddress,AttachInvoice:e.InvoiceAttached,InvoiceContact:e.InvoiceContact,InvoiceName:e.InvoiceName,PayTermCode:e.Payment,TaxId:e.TaxID,NotTaxId:!e.WithTaxID,Subtotal:Number(e.ProductDtos.map((function(e){return t+=e.Subtotal})))+e.Charge+e.Fare};a.checkModalBranchData.push(r)})),a.IsViewDetail="viewDetail"===t,a.IsViewDetail?(this.print("原始資料",a.branchStore),a.branchStore=a.branchStore.map((function(e){return{productData:e.ProductDtos,branchData:{TotalQty:e.TotalQty,DeliveryDate:e.DeliveryDate,DeliveryTimeCode:e.DeliveryTimeCode,ReceiveName:e.ReceiveName,ReceiveContact:e.ReceiveContact,ReceiveAddress:e.ReceiveAddress,Charge:e.Charge,Fare:e.Fare,BranchRemark:e.BranchRemark,Payment:e.Payment,InvoiceAttached:e.InvoiceAttached,InvoiceContact:e.InvoiceContact,InvoiceName:e.InvoiceName,InvoiceAddress:e.InvoiceAddress,TaxID:e.TaxID,WithTaxID:!e.WithTaxID},store:{CustomerShtName:e.CustomerName,CustomerId:e.CustomerId,OrderId:e.OrderId}}})),$("#readonlycheck").modal("show"),a.$store.commit("ISLOADING",!1)):(a.tempSearchProduct=[],this.$notify({title:"提示",message:"此功能關閉中，因為無法取得分店 API",type:"warning",duration:3500}))},getCustomerData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r,i,o,c,d,l,u,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r=a.customer.ChainOrder?"Headquarter":"Single",i="".concat("https://api.yahome-test.com.tw/HiqbioApi","/User/Customer/GetCustomers?salesCode=").concat(a.saleInfo.ERP_SalesCode,"&keyword=").concat(a.customer.Customer.CustomerFullName,"&purchaseType=").concat(r),t.next=5,a.$http.get(i).then((function(e){a.store=e.data.Data[0],a.customer=Object(n["a"])(Object(n["a"])({},a.customer),{},{InvoiceAddress:a.store.Address,DeptID:a.store.DeptID,TaxID:a.store.TaxID,TEL_NO:a.store.TEL_NO,Contact:a.store.Contact}),a.$store.commit("CUSTOMERDATA",a.customer)})).catch((function(){a.$store.commit("ISLOADING",!1)}));case 5:o=s(a.branchStore),t.prev=6,o.s();case 8:if((c=o.n()).done){t.next=29;break}d=c.value,l=s(d.ProductDtos),t.prev=11,l.s();case 13:if((u=l.n()).done){t.next=19;break}return m=u.value,t.next=17,a.getProductData(m);case 17:t.next=13;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](11),l.e(t.t0);case 24:return t.prev=24,l.f(),t.finish(24);case 27:t.next=8;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t["catch"](6),o.e(t.t1);case 34:return t.prev=34,o.f(),t.finish(34);case 37:if(a.$store.commit("ISLOADING",!1),localStorage.setItem("routerFrom","OrderSearch"),!a.customer.ChainOrder){t.next=45;break}return t.next=42,a.sameProduct();case 42:a.$router.push({name:"AllMainStoreOrder",params:{confirmProduct:a.tempSearchProduct,checkModalBranchData:a.checkModalBranchData}}),t.next=48;break;case 45:a.tempSearchProduct.sort((function(e,t){return e.SerialNumber-t.SerialNumber})),a.tempSearchProduct.forEach((function(e,t,a){t>0&&e.ItemNo===a[t-1].ItemNo&&e.WhseID===a[t-1].WhseID&&(e.ProductGuid=a[t-1].ProductGuid)})),a.$router.push({name:"AllSingleStoreOrder",params:{confirmProduct:a.tempSearchProduct,checkModalBranchData:a.checkModalBranchData}});case 48:case"end":return t.stop()}}),t,null,[[6,31,34,37],[11,21,24,27]])})))()},getProductData:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t,i="".concat("https://api.yahome-test.com.tw/HiqbioApi","/Inventory/Product/GetProducts?salesDeptId=").concat(r.saleInfo.DeptCode,"&whseId=").concat(e.WhseID,"&productId=").concat(e.ItemNo.trim()),o={},a.next=5,r.$http.get(i).then((function(t){if(0===t.data.Data.length)return r.$notify({title:"錯誤",message:"該 DepId 查無資料，將無法取出產品",type:"error",duration:3500}),!1;o=r.customer.ChainOrder?Object(n["a"])(Object(n["a"])({},t.data.Data[0]),{},{IsOrder:!e.Free,IsPR:!!e.Free,Free:e.Free,ProductGuid:r.Guid(),DetailRows:[],totalQuantityInfo:{totalQuantity:1,templateId:0}}):Object(n["a"])(Object(n["a"])({},t.data.Data[0]),{},{IsOrder:!e.Free,IsPR:!!e.Free,ProductGuid:r.Guid(),IsPartialDelivery:e.PartialDelivery,orderQuantity:e.OrderQTY,warehousesNum:e.DepositQTY,IsPending:!e.PendingTo&&0!==e.PartialDeliveryQTY,SerialNumber:e.SerialNumber})})).then((function(){if(r.customer.ChainOrder)if(0===r.tempSearchProduct.length)r.tempSearchProduct.push(o);else{var t=!1;r.tempSearchProduct.forEach((function(a,i,s){s[i].ItemNo===e.ItemNo&&s[i].WhseID===e.WhseID&&s[i].Free===e.Free&&(t=!0),s.length-1===i&&(t||r.tempSearchProduct.push(o))}))}else r.tempSearchProduct.push(o)})).catch((function(){r.$store.commit("ISLOADING",!1)}));case 5:case"end":return a.stop()}}),a)})))()},sameProduct:function(){var e=this;e.branchStore.forEach((function(t){t.ProductDtos.forEach((function(a){e.tempSearchProduct.forEach((function(r,i){if(r.ItemNo===a.ItemNo&&r.WhseID===a.WhseID&&r.Free===a.Free){var o,s,c,d=t.CustomerId,l={productData:[Object(n["a"])({},a)],Guid:e.Guid(),store:d,orderQuantity:a.OrderQTY,warehousesNum:a.DepositQTY,IsPartialDelivery:a.PartialDelivery,IsPending:!a.PendingTo&&0!==a.PartialDeliveryQTY};if((null===(o=r.DetailRows)||void 0===o?void 0:o.length)>1&&i>0)a.ItemNo===r.DetailRows[i-1].productData[0].ItemNo&&a.WhseID===r.DetailRows[i-1].productData[0].WhseID&&(null===(s=r.DetailRows[i])||void 0===s?void 0:s.store)===(null===(c=r.DetailRows[i-1])||void 0===c?void 0:c.store)&&(l=Object(n["a"])(Object(n["a"])({},l),{},{Guid:r.DetailRows[i-1].Guid}));r.DetailRows.push(l)}}))}))}))},sortProduct:function(){var e=this;e.branchStore.forEach((function(e){e.ProductDtos.sort((function(e,t){return e.SerialNumber-t.SerialNumber}))}))}},mounted:function(){var e=this;e.$store.commit("HEADER","訂單查詢"),e.$store.commit("ISWELCOME",!0),e.$store.commit("ISGOBACK",!1);var t=(new Date).getTime()-1296e6,a=new Date(t).getFullYear(),r=e.AddZero(new Date(t).getMonth()+1),i=e.AddZero(new Date(t).getDate()),o="".concat(a,"-").concat(r,"-").concat(i);e.$route.params.OrderSearchParams?e.searchBox={status:e.$route.params.OrderSearchParams,from:e.today,to:e.today,keyword:""}:e.searchBox={status:"",from:o,to:e.today,keyword:""},e.$store.commit("CLOSEALLORDERDATA"),e.allDeliveryTime=x.Data,e.getAllData()},watch:{saleInfo:function(){var e=this;e.getAllData()}},computed:{saleInfo:function(){var e=this;return JSON.parse(localStorage.getItem("saleInfo"))||e.$store.state.saleInfo}},components:{ReadOnlyModal:I,Pagination:C["a"]},destroyed:function(){$(".modal").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()}},_=P,S=Object(f["a"])(_,r,i,!1,null,null,null);t["default"]=S.exports},9167:function(e){e.exports=JSON.parse('{"Status":200,"ErrorMessage":null,"Data":{"OrderId":2039,"OrderStoreDetails":[{"ProductDtos":[{"OrderStoreProductId":2061,"SerialNumber":1,"OrderStoreId":2052,"ItemNo":"11020110Z           ","ItemName":"褐抑定藻寡醣加強配方-60粒","Specification":"550mg/粒  60粒/盒","OrderQTY":16,"DepositQTY":10,"FreeQty":0,"Free":false,"WhseID":"KS01001   ","UnitPrice":0,"Subtotal":0,"UOM":"盒","PartialDelivery":false,"PartialDeliveryQTY":0,"IsPending":false,"PendingTo":null,"CreateTime":"2022-02-22T19:57:28.547","CreateUser":"cf44acd6-43d2-4564-80a8-a06a6a8e39a2","UpdateTime":"2022-02-22T19:57:55.847","UpdateUser":"cf44acd6-43d2-4564-80a8-a06a6a8e39a2"},{"OrderStoreProductId":2062,"SerialNumber":2,"OrderStoreId":2052,"ItemNo":"11020110Z           ","ItemName":"褐抑定藻寡醣加強配方-60粒","Specification":"550mg/粒  60粒/盒","OrderQTY":1,"DepositQTY":0,"FreeQty":1,"Free":true,"WhseID":"KS01001   ","UnitPrice":0,"Subtotal":0,"UOM":"盒","PartialDelivery":false,"PartialDeliveryQTY":0,"IsPending":false,"PendingTo":null,"CreateTime":"2022-02-22T19:57:28.56","CreateUser":"cf44acd6-43d2-4564-80a8-a06a6a8e39a2","UpdateTime":"2022-02-22T19:57:55.847","UpdateUser":"cf44acd6-43d2-4564-80a8-a06a6a8e39a2"}],"OrderStoreId":2052,"OrderId":2039,"CustomerId":"11B0711000","CustomerName":"芯聯藥局","ProductCount":1,"TotalQty":17,"DeliveryDate":"2022-02-25T00:00:00","DeliveryTimeCode":"1","ReceiveName":"11","ReceiveContact":"02-8286-6803","ReceiveAddress":"新北市蘆洲區民族路210號/芯聯藥局","Payment":null,"WithTaxID":null,"TaxID":null,"InvoiceTitle":"芯聯藥局","InvoiceAttached":null,"InvoiceName":null,"InvoiceContact":null,"InvoiceAddress":null,"Charge":30,"Fare":150,"BranchRemark":"","CreateTime":"2022-02-22T19:57:28.47","CreateUser":"cf44acd6-43d2-4564-80a8-a06a6a8e39a2","UpdateTime":"2022-02-22T19:57:55.813","UpdateUser":"cf44acd6-43d2-4564-80a8-a06a6a8e39a2"}]}}')},a9de:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("159b"),a("d81d"),a("498a");var r=a("ddfc"),i={data:function(){return{branchData:null,filterContented:null,keyData:0}},methods:{concatRow:function(){this.print("將掛單和關聯的合併再一起1","這裡?");var e=this;this.print("store",e.$store.state.branchStore),e.branchData=JSON.parse(JSON.stringify(e.$store.state.branchStore)),e.branchData.forEach((function(e){e.productData=e.productData.map((function(t,a,i){var o,s,n;return!t.IsPending&&(null===t||void 0===t?void 0:t.ProductGuid)===(null===(o=i[a+1])||void 0===o?void 0:o.ProductGuid)&&null!==(s=i[a+1])&&void 0!==s&&s.IsPending?(Object(r["a"])("不是掛單，但下一筆是掛單",t),{ProductGuid:t.ProductGuid,ProductId:t.ItemNo.trim(),WhseID:t.WhseID.trim(),IsPending:!0,PendingQuantity:i[a+1].orderQuantity,PurchaseQuantity:t.orderQuantity+i[a+1].orderQuantity,ProductName:t.ItemName,IsFree:t.IsPR||!1,IsPartialDelivery:i[a+1].IsPartialDelivery,PartialDeliveryQuantity:i[a+1].orderQuantity,UnitPrice:t.UnitPrice,Subtotal:0,Specification:t.Specification,DepositQuantity:t.warehousesNum+i[a+1].warehousesNum,UOM:t.UOM}):t.IsPending&&(null===t||void 0===t?void 0:t.ProductGuid)!==(null===(n=i[a+1])||void 0===n?void 0:n.ProductGuid)?(Object(r["a"])("是掛單，但下一筆不是掛單",t),{ProductGuid:t.ProductGuid,ProductId:t.ItemNo.trim(),WhseID:t.WhseID.trim(),IsPending:!0,PendingQuantity:t.orderQuantity,PurchaseQuantity:t.orderQuantity,ProductName:t.ItemName,IsFree:t.IsPR||!1,IsPartialDelivery:t.IsPartialDelivery,PartialDeliveryQuantity:t.orderQuantity,UnitPrice:t.UnitPrice,Subtotal:0,Specification:t.Specification,DepositQuantity:t.warehousesNum,UOM:t.UOM}):t.IsPending?(Object(r["a"])("都不是的判斷",t),Object(r["a"])("都不是的判斷結果",e.productData),{ProductGuid:t.ProductGuid,ProductId:t.ItemNo.trim(),WhseID:t.WhseID.trim(),IsPending:t.IsPending,PendingQuantity:t.orderQuantity,PurchaseQuantity:t.orderQuantity,ProductName:t.ItemName,IsFree:t.IsPR||!1,IsPartialDelivery:t.IsPartialDelivery,PartialDeliveryQuantity:t.PartialDeliveryQuantity,UnitPrice:t.UnitPrice,Subtotal:0,Specification:t.Specification,DepositQuantity:t.warehousesNum,UOM:t.UOM}):(Object(r["a"])("不是掛單的一般項目",t),{ProductGuid:t.ProductGuid,ProductId:t.ItemNo.trim(),WhseID:t.WhseID.trim(),IsPending:!1,PendingQuantity:0,PurchaseQuantity:t.orderQuantity,ProductName:t.ItemName,IsFree:t.IsPR||!1,IsPartialDelivery:t.IsPartialDelivery,PartialDeliveryQuantity:0,UnitPrice:t.UnitPrice,Subtotal:0,Specification:t.Specification,DepositQuantity:t.warehousesNum,UOM:t.UOM})}))}));var t=[];e.branchData.forEach((function(e,a){t.push(JSON.parse(JSON.stringify(e))),t[a].productData=[],e.productData.forEach((function(e,r,i){(0===r||e.ProductGuid!==i[r-1].ProductGuid)&&t[a].productData.push(e)}))})),e.branchData=JSON.parse(JSON.stringify(t)),this.print("branchData",e.branchData),e.branchData=e.branchData.map((function(e){return{CustomerId:e.store.CustomerID,Products:e.productData,Store:e.store}})),this.print("返回結構",e.branchData)},checkInventory:function(){var e=this;e.$store.commit("ISLOADING",!0),e.concatRow(),e.$nextTick((function(){var t=JSON.parse(JSON.stringify(e.branchData));t.forEach((function(e){e.Products=e.Products.map((function(e){return{ProductId:e.ProductId,WhseID:e.WhseID,IsPending:e.IsPending,PendingQuantity:e.PendingQuantity,PurchaseQuantity:e.PurchaseQuantity}}))})),t=t.map((function(e){return{CustomerId:e.CustomerId,Products:e.Products}})),Object(r["a"])("確認訂單格式",t),e.filterContented={Customers:t}}))}}}},b6db:function(e){e.exports=JSON.parse('{"Status":200,"ErrorMessage":null,"Data":[{"OrderId":2039,"OrderDate":"2022-02-22T19:57:28.21","OrderNumber":"O1645531048","HQCode":"11B0710000","HQName":"芯聯藥局","Payment":"014-00","WithTaxID":true,"TaxID":"50710879","InvoiceAttached":true,"InvoiceName":"梁正江0936416972","InvoiceContact":"02-8286-6873","InvoiceAddress":"新北市蘆洲區民族路361號1樓/北聯藥局","Remark":"","OrderStatus":"Signin","StaffID":"H1090157            ","StaffName":"某位業務","StaffDept":"23110","ChainOrder":true,"IsHeadquarterInvoice":true,"Substitute":"某位業務2","TaskId":"43e36828-ab0e-448f-8884-8515edca9a28","FormNo":"PO220200001","ApplicantDateTime":"2022-02-22T19:57:55.707","ApplicantUserGuid":"cf44acd6-43d2-4564-80a8-a06a6a8e39a2","ApplicantGroupCode":"e737f3b0-7b70-4bc6-9f02-31d76e9f2454","FinishDate":null,"CreateTime":"2022-02-22T19:57:28.373","CreateUser":"cf44acd6-43d2-4564-80a8-a06a6a8e39a2","UpdateTime":"2022-02-22T19:57:55.707","UpdateUser":"cf44acd6-43d2-4564-80a8-a06a6a8e39a2","Customer":{"CustomerID":"11B0710000","CustomerShtName":"北聯藥局","CustomerFullName":"芯聯藥局","FAX_NO":"","UTypeName":"B2B存證"}},{"OrderId":2040,"OrderDate":"2022-02-24T15:50:42.517","OrderNumber":"O1645689042","HQCode":"11B0074000","HQName":"廣欣藥師藥局","Payment":"015-00","WithTaxID":true,"TaxID":"10027181","InvoiceAttached":true,"InvoiceName":"周藥師","InvoiceContact":"02-2254-0613","InvoiceAddress":"新北市板橋區雙十路三段52號/廣欣藥師藥局","Remark":"","OrderStatus":"Signin","StaffID":"H1090157            ","StaffName":"某位業務","StaffDept":"23110","ChainOrder":true,"IsHeadquarterInvoice":true,"Substitute":"某位業務2","TaskId":"84fd5d6f-fb24-4b66-8281-ff0e7fc4f8f6","FormNo":"PO220200002","ApplicantDateTime":"2022-02-24T15:50:53.327","ApplicantUserGuid":"db2a1b45-534d-4803-adae-c3c4f155ecb5","ApplicantGroupCode":"98b6b580-e085-4be7-9e21-5dce3c90e4c0","FinishDate":null,"CreateTime":"2022-02-24T15:50:42.7","CreateUser":"db2a1b45-534d-4803-adae-c3c4f155ecb5","UpdateTime":"2022-02-24T15:50:53.327","UpdateUser":"db2a1b45-534d-4803-adae-c3c4f155ecb5","Customer":{"CustomerID":"11B0074000","CustomerShtName":"廣欣藥板橋","CustomerFullName":"廣欣藥師藥局","FAX_NO":"VIP","UTypeName":"B2C存證"}}]}')},d072:function(e){e.exports=JSON.parse('{"Status":200,"ErrorMessage":null,"Data":[{"Code":"1","Name":"1.早上(09~12點)"},{"Code":"2","Name":"2.中午(12~17點)"},{"Code":"3","Name":"3.下午(17~20點)"},{"Code":"4","Name":"4.不分時段"}]}')}}]);