# 後台管理系統專案
[網站連結](https://bardkidd.github.io/other/#/admin/mainstoreorder)
## 結構說明

- commonAPI 資料夾: 放置常呼叫的 API 函式，避免重複撰寫相同程式碼。
- components 資料夾: 通用元件資料夾。
- data 資料夾: 本專案使用的資料(已經過置換及修飾)。
- interceptors 資料夾: 攔截器與回應錯誤的各種處理方式。
- mixins 資料夾:
  1. afterSaleProcessing: 專門對應 AfterSaleModel 元件函式。因為多個地方都有使用到這個元件所以拉出。傳入的參數為暫存商品列與已選取產品列。
  2. commonFunction: 通用的函式。在其他專案也有可能會用到的函式會放這邊，例如產生 Guid 格式等。
  3. commonModal: 本專案通用的表單函式。每個選擇產品的 Modal 都需要取得產品系列、產品分類等資訊，所以將這些拉出以免重複撰寫。
  4. orderProcessing: 適用於有掛單的功能(總店、單店訂購)。因為購物車畫面需要將掛單與之相聯之產品分開顯示，但送出訂單時需要將兩筆合併，所以只要丟進該邏輯就可完成此事(通常有問題都是元件有問題，該邏輯基本上沒問題)。
  5. shoppingCardProcessing: 適用於需要選擇訂購或公關產品的功能(總店、單點訂購)。因為在 Modal 上選擇時是同一筆資料，兩個都勾選的話只會是該物件的 isPR 和 isOrder 同時為 true，並不會被拆為兩筆，並傳到不同元件內。所以只要將資料丟入該邏輯就可以完成此事。
- printConsole 資料夾: 避免 console.log 只顯示最新資料，所以直接在全域引入該函式，將資料進行深層複製。有避免傳入參數為 undefined、null 的問題。
- store 資料夾: Vuex 等全域資料夾，有些有早期總店訂購的部分功能，內有註解。
- views 資料夾: 畫面元件。
---
### 各功能第一頁畫面

除了訂單查詢和客戶資訊外，都是選擇客戶(e.g. 總店訂購)

### 總店訂購購物車邏輯

寄倉數量定義: 訂購後放置倉庫的數量。
掛單定義: 該次訂購時庫存量不足，剩餘未訂購的貨為下次出貨，故須以掛單表示。

1. 寄倉數量必定小於等於訂購數量。
2. 寄倉數量不做總數量的計算。
3. 庫存量減去畫面上該品項總數量後，新增一筆的訂購項目不得超過相減後數量。e.g. 庫存量: 140，畫面上已輸入 140 個數量，後續新增一筆的量不得超過 140 - 140 的值。
4. 已被選過的分店，在新增一筆的品項中無法顯示。
5. 庫存不足的 Modal，最多只能輸入該行的值。e.g. 訂購數量: 150，該 Modal 最多僅能輸入 150。
6. 與掛單相聯的該行(A 行)，A 行的最後值為: A 行值 - 庫存不足 Modal 值；而掛單行顯示的就是庫存不足 Modal 值。
7. 庫存不足 Modal，能最小輸入的值為畫面數量 - 商品總數量。e.g. 庫存量: 8，畫面已輸入 180，在該 Modal 中最小值為 |8 - 180|。

### 總店訂購作業刪除參考資料

[關於修改數組後，頁面不渲染的問題](https://blog.csdn.net/NAMECZ/article/details/83988806)

### 客戶資訊表格套件修改 Icon 參考資料

[修改 element 表格 el-table 展開 expand 的圖標](https://blog.csdn.net/weixin_46379498/article/details/115242929)

### 一般退換貨、寄倉取換貨

1. 流程： 選擇客戶 > 選擇訂單 > 選擇產品 > 購物車
2. 一般退貨與寄倉取貨的購物車畫面相似
3. 一般換貨與寄倉換貨的購物車畫面相似
